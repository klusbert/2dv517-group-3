#AUTO_GENERATED BY TERRAFORM DO NOT MODIFY THE OUTPUT


load_module /usr/lib/nginx/modules/ngx_stream_module.so;
events {
    worker_connections 1024;
}
http {
    upstream wordpress {
        #server srv1.example.com;
        #server srv2.example.com;
        #server srv3.example.com;
        server 192.168.199.9;
        server 192.168.199.18;
        server 192.168.199.7;

    }

    server {
        listen 80;

        location / {
            proxy_pass http://wordpress;
        }
    }
}

stream {
    upstream db {
        server 192.168.199.11:3306;
        server 192.168.199.12:3306 backup;
    }

    server {
        listen 3306;
        proxy_pass db;
        proxy_connect_timeout 1s; # detect failure quickly
    }
}